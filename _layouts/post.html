---
layout: baseof
---

<section id="content" class="pt-36">
  <div class="container px-0 md:max-w-7xl">
    <div class="px-4">
      <h1 class="text-3xl font-bold mb-6">
        {{ page.title }}
      </h1>

      <div class="text-base mb-6">
        Created at: <span class="font-mono">{{ page.date | date: '%Y-%m-%d' }}</span> | Author: {{ page.author }}
      </div>

      <div class="mb-20 markdown">
        {{ content }}
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("pre code").forEach((block) => {
    const parentWithLanguage = block.closest("[class*='language-']");
    if (parentWithLanguage?.classList.contains("language-plaintext")) return;

    let lines = block.textContent.split("\n");

    // Extract filename from first line if it matches @filename:...
    let filenameLabel = null;
    const filenameMatch = lines[0].match(/^@filename:(.+)$/);
    if (filenameMatch) {
      filenameLabel = filenameMatch[1].trim();
      lines.shift(); // remove the @filename line from code block
    }

    // Remove trailing empty line
    if (lines.length > 0 && lines[lines.length - 1].trim() === "") {
      lines.pop();
    }

    // Escape HTML characters and format lines
    const escapeHTML = (str) =>
      str.replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/ /g, "&nbsp;");

    const numberedLines = lines.map((line, idx) => {
      return `<span class="line"><span class="line-number">${idx + 1}</span><span class="code-line">${escapeHTML(line)}</span></span>`;
    }).join("");

    block.innerHTML = numberedLines;

    if (filenameLabel) {
      const filenameElem = document.createElement("div");
      filenameElem.textContent = `File: ${filenameLabel}`;
      filenameElem.className = "mb-1";
      block.parentElement.insertAdjacentElement("beforebegin", filenameElem);
    }
  });
});
</script>

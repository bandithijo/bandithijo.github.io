---
layout: baseof
---

<section id="content" class="pt-36">
  <div class="container px-0 md:max-w-7xl">
    <div class="px-4">
      <h1 class="text-3xl font-bold mb-6">
        {{ page.title }}
      </h1>

      <div class="text-base mb-6">
        Created at: <span class="font-mono">{{ page.date | date: '%Y-%m-%d' }}</span> | Author: {{ page.author }}
      </div>

      <div class="mb-20 markdown">
        {{ content }}
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("pre code").forEach((block) => {
    const parentWithLanguage = block.closest("[class*='language-']");
    if (parentWithLanguage?.classList.contains("language-plaintext")) return;

    // Save original highlighted HTML
    const originalHtml = block.innerHTML;

    // Extract filename from first line if it matches @filename:...
    let lines = originalHtml.split(/\n/);
    let filenameLabel = null;

    const plainTextFirstLine = block.textContent.split("\n")[0];
    const filenameMatch = plainTextFirstLine.match(/^@filename:(.+)$/);

    if (filenameMatch) {
      filenameLabel = filenameMatch[1].trim();
      lines.shift(); // remove filename line from HTML lines too
    }

    // Remove trailing empty line
    if (lines.length > 0 && lines[lines.length - 1].trim() === "") {
      lines.pop();
    }

    // Wrap each line preserving inner HTML
    const numberedLines = lines.map((line, idx) => {
      return `<div class="line"><span class="line-number">${idx + 1}</span><span class="code-line">${line}</span></div>`;
    }).join("");

    block.innerHTML = numberedLines;

    if (filenameLabel) {
      const filenameElem = document.createElement("div");
      filenameElem.textContent = filenameLabel;
      filenameElem.className = "font-semibold font-mono mb-2";
      block.parentElement.insertAdjacentElement("beforebegin", filenameElem);
    }
  });
});
</script>
